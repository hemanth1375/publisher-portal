<div class="container">
    <div class="row">
        <form [formGroup]="formGroupUpstreamAuth">
    <div class="row">
        <div class="col-sm-12">
            <h3>Set authentication requirements between KrakenD and your services. If you'd like to pass JWT tokens to the backend as well, add the Authorization header in the endpoint's parameter forwarding.</h3>
            
        </div>
        <div class="col-sm-12 heading-with-toggle d-flex align-items-center gap-2">
            <div>
                <h3>Auth: Client Credentials</h3>
            </div>
            <div>
                <mat-slide-toggle #authentication id="isAuthActive"
                    (change)="onToggleChangeStaticResponse($event, authentication.id)"></mat-slide-toggle>
            </div>
        </div>
        @if(!isAuthActive){
            <p>Enable a 2-legged OAuth2 flow, making the gateway request a token to an authorization server before reaching the backend's protected resources. The token refreshes when needed.</p>
        }@else{
            <div class="row">
                <div class="col-sm-12 col-md-6">
                    <div class="mb-3">
                      <label for="clientId" class="form-label">CLIENT ID</label>
                      <input type="text" class="form-control" id="clientId" formControlName="clientId">
                      <div class="form-text">The Client ID as it will provided to the Auth server</div>
                    </div>
                  </div><div class="col-sm-12 col-md-6">
                    <div class="mb-3">
                      <label for="clientSecret" class="form-label">CLIENT SECRET</label>
                      <input type="text" class="form-control" id="clientSecret" formControlName="clientSecret">
                      <div class="form-text">The Client secret as it will provided to the Auth server</div>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-6">
                    <div class="mb-3">
                      <label for="tokenUrl" class="form-label">Token URL</label>
                      <input type="text" class="form-control" id="tokenUrl" formControlName="tokenUrl">
                      <div class="form-text">The URL where the negotiation of the token will happen</div>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-6">
                    <div class="mb-3">
                      <label for="scopes" class="form-label">Scopes</label>
                      <input type="text" class="form-control" id="scopes" formControlName="scopes">
                      <div class="form-text">Comma separated list of scopes needed.</div>
                    </div>
                  </div>
                  <div class="col-sm-12">
                    <div class="mb-3">
                      <label for="parameters" class="form-label">Additional endpoint Parameters</label>
                      <input type="text" class="form-control" id="parameters" formControlName="parameters">
                      <div class="form-text">Enter here any additional parameters that you want to include in the payload when requesting the token. For instance, it is frequent to add the audience request parameter that denotes the target API for which the token should be issued.</div>
                    </div>
                  </div>
            </div>
        }
        <hr class="mt-4">
        <div class="col-sm-12 heading-with-toggle d-flex align-items-center gap-2">
            <div>
                <h3>Google Cloud Service Account</h3>
            </div>
            <div>
                <mat-slide-toggle #googleCloud id="isGoogleCloudActive"
                    (change)="onToggleChangeStaticResponse($event, googleCloud.id)"></mat-slide-toggle>
            </div>
        </div>
        @if(!isGoogleCloudActive){
            <p>Enable a 2-legged OAuth2 flow, making the gateway request a token to an authorization server before reaching the backend's protected resources. The token refreshes when needed.</p>
        }@else{
            <div class="col-sm-12 col-md-6">
                <div class="mb-3">
                  <label for="audience" class="form-label">Audience</label>
                  <input type="text" class="form-control" id="audience" formControlName="audience">
                  <div class="form-text">The audience in GCP looks like an URL, and contains the destination service you will ask a token for. Most of the times this URL will match exactly with the host entry. Credentials are taken from the environment variable GOOGLE_APPLICATION_CREDENTIALS, which Cloud Run passes automatically.</div>
                </div>
              </div>
        }
        <hr class="mt-4">
        <div class="col-sm-12 heading-with-toggle d-flex align-items-center gap-2">
            <div>
                <h3>NLTM Authentication</h3>
            </div>
            <div>
                <mat-slide-toggle #ntlmAuth id="isNtlmAuthActive"
                    (change)="onToggleChangeStaticResponse($event, ntlmAuth.id)"></mat-slide-toggle>
            </div>
        </div>
        @if(!isNtlmAuthActive){
            <p>NTLM (NT Lan Manager) is a suite of Microsoft security protocols used for authentication, integrity, and confidentiality of network communications. It is primarily used for authentication on Windows-based systems.</p>
        }@else{
            <div class="col-sm-12 col-md-6">
                <div class="mb-3">
                  <label for="user" class="form-label">User</label>
                  <input type="text" class="form-control" id="user" formControlName="user">
                  <div class="form-text">The proxy address used to forward the traffic. The address must contain the protocol and the port.</div>
                </div>
              </div>
            <div class="col-sm-12 col-md-6">
                <div class="mb-3">
                  <label for="password" class="form-label">Password</label>
                  <input type="text" class="form-control" id="password" formControlName="password">
                  <div class="form-text">The proxy address used to forward the traffic. The address must contain the protocol and the port.</div>
                </div>
              </div>
        }
        <div class="col-sm-12 d-flex justify-content-end mt-3">
            <!-- <button mat-raised-button color="primary" (click)="saveForm()">Save</button> -->
        </div>
    </div>
</form>
</div>
</div>
